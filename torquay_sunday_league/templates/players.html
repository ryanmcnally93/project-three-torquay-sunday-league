{% extends "base.html" %}
{% block content %}

<h1 class="main-heading">{{ team.team_name }}'s Players</h1>

<div class="row">
    <div class="col s12 center-align">
        <a href="{{ url_for('add_player', id=team.id) }}" class="btn green">
            Add Player <i class="fas fa-plus-square right"></i>
        </a>
    </div>
</div>

<main id="main-content">

    <div class="player-left-box">
        <img id="enzo" class="player-left" src="{{ url_for('static', filename='images/enzo-fernandez.webp') }}">
    </div>

    <div class="row players-row">
        <!-- Paste content -->
        <ul class="collapsible player-collapsible">
            {% for player in players %}
                {% if player.team_id == team.id %}
                    <li>
                        <div class="collapsible-header white-text green">
                            <i class="fas fa-caret-down"></i>
                            <strong>{{ player.player_kit_number }}).  {{ player.player_name }}</strong>
                        </div>
                        <div class="collapsible-body">
                            Country: {{ player.player_country }}<br>
                            Position: {{ player.player_position }}<br>
                            Joined: {{ player.player_joined.strftime("%d-%m-%Y") }}<br>
                            <!-- if team.created_by == session.user -->
                            <a class="btn green darken-4" href="{{ url_for('edit_player', player_id=player.id, team_id=team.id) }}">Edit</a>
                            <a class="btn red modal-trigger" id="delete_player" href="#modal-{{ player.id }}">Delete</a>
                            <!-- endif -->
                        </div>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
    {% for player in players %}
        {% if player.team_id == team.id %}
            <!-- Modal Structure -->
            <div id="modal-{{ player.id }}" class="modal">
                <div class="modal-content">
                    <h4>Are you sure you want to delete this player?</h4>
                    <p>This action cannot be undone</p>
                </div>
                <div class="modal-footer">
                    <!--  url_for('delete_player', team_id=team.id)  -->
                    <a href="{{ url_for('delete_player', team_id=team.id, player_id=player.id) }}" class="btn green">Yes</a>
                    <a href="{{ url_for('players', id=team.id) }}" class="btn red">No</a>
                </div>
            </div>
        {% endif %}
    {% endfor %}

    <div id="de-bruyne" class="player-right-box">
        <img class="player-right" src="{{ url_for('static', filename='images/de-bruyne.webp') }}">
    </div>

</main>

{% endblock %}